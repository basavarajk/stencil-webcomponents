/*! Built with http://stenciljs.com */
const{h:t}=window.SplitMe;var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i="Expected a function",s=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,o=parseInt,d="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,c=d||u||Function("return this")(),f=Object.prototype.toString,g=Math.max,p=Math.min,z=function(){return c.Date.now()};function S(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function m(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&f.call(t)==n}(t))return s;if(S(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=S(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var i=a.test(t);return i||l.test(t)?o(t.slice(2),i?2:8):h.test(t)?s:+t}var v=function(t,e,s){var n=!0,r=!0;if("function"!=typeof t)throw new TypeError(i);return S(s)&&(n="leading"in s?!!s.leading:n,r="trailing"in s?!!s.trailing:r),function(t,e,s){var n,r,h,a,l,o,d=0,u=!1,c=!1,f=!0;if("function"!=typeof t)throw new TypeError(i);function v(e){var i=n,s=r;return n=r=void 0,d=e,a=t.apply(s,i)}function w(t){var i=t-o;return void 0===o||i>=e||i<0||c&&t-d>=h}function y(){var t=z();if(w(t))return E(t);l=setTimeout(y,function(t){var i=e-(t-o);return c?p(i,h-(t-d)):i}(t))}function E(t){return l=void 0,f&&n?v(t):(n=r=void 0,a)}function b(){var t=z(),i=w(t);if(n=arguments,r=this,o=t,i){if(void 0===l)return function(t){return d=t,l=setTimeout(y,e),u?v(t):a}(o);if(c)return l=setTimeout(y,e),v(o)}return void 0===l&&(l=setTimeout(y,e)),a}return e=m(e)||0,S(s)&&(u=!!s.leading,h=(c="maxWait"in s)?g(m(s.maxWait)||0,e):h,f="trailing"in s?!!s.trailing:f),b.cancel=function(){void 0!==l&&clearTimeout(l),d=0,n=o=r=l=void 0},b.flush=function(){return void 0===l?a:E(z())},b}(t,e,{leading:n,maxWait:e,trailing:r})};class w{constructor(){this.n=1,this.d="horizontal",this.fixed=!1,this.sizes="",this.minSizes="",this.maxSizes="",this.throttle=0,this.nChanged=!1,this.sizesChanged=!1,this.minSizesChanged=!1,this.maxSizesChanged=!1,this.onTouchMove=((t,e)=>{t.preventDefault(),t.touches.length>0&&this.throttledResize(t.touches[0].clientX,t.touches[0].clientY,e,t)})}watchN(){this.nChanged=!0}watchSizes(){this.sizesChanged=!0}watchMinSizes(){this.minSizesChanged=!0}watchMaxSizes(){this.maxSizesChanged=!0}watchThrottle(t){this.throttledResize=v(this.resize.bind(this),t)}componentWillLoad(){this.throttledResize=v(this.resize.bind(this),this.throttle);let t=this.parseSizes(this.sizes);this.slotEnd=t.length===this.n?this.assignedSlotEnd(t):this.defaultSlotEnd(this.n);let e=this.parseSizes(this.minSizes);this.minSizesArr=e.length===this.n?e:this.defaultMinSizes(this.n);let i=this.parseSizes(this.maxSizes);this.maxSizesArr=i.length===this.n?i:this.defaultMaxSizes(this.n)}componentWillUpdate(){let t;if(this.sizesChanged&&(t=this.parseSizes(this.sizes)).length!==this.n&&(this.sizesChanged=!1),this.sizesChanged?(this.slotEnd=this.assignedSlotEnd(t),this.nChanged=!1,this.sizesChanged=!1):this.nChanged&&(this.slotEnd=this.rescaleSlotEnd(this.n,this.slotEnd),this.nChanged=!1),this.minSizesChanged){let t=this.parseSizes(this.minSizes);this.minSizesArr=t.length===this.n?t:this.defaultMinSizes(this.n),this.minSizesChanged=!1}if(this.maxSizesChanged){let t=this.parseSizes(this.minSizes);this.maxSizesArr=t.length===this.n?t:this.defaultMaxSizes(this.n),this.maxSizesChanged=!1}}defaultSlotEnd(t){let e=[];for(let i=0;i<t;++i)e.push((i+1)/t);return e}assignedSlotEnd(t){let e=[],i=0;for(let s=0;s<t.length;++s)e.push(Math.min(1,i+=t[s]));return e}rescaleSlotEnd(t,e){let i=e.length/t,s=[];for(let n=0;n<t-1;++n)s.push(n<e.length?e[n]*i:(n+1)/t);return s.push(1),s}defaultMinSizes(t){let e=[];for(let i=0;i<t;++i)e.push(0);return e}defaultMaxSizes(t){let e=[];for(let i=0;i<t;++i)e.push(1);return e}parseSizes(t){if(!t)return[];if(Array.isArray(t))return t.length===this.n?t:[];try{const e=JSON.parse(t);if(Array.isArray(e))return e.length===this.n?e:[]}catch(t){}let e=t.split(",");if(e.length!==this.n)return[];let i=[];const s=/^\s*\d+(\.\d*)?\%\s*$/,n=/^\s*(0|1)(\.\d*)?\s*$/;for(let t=0;t<e.length;++t){let r=e[t];if(r.match(s))i.push(parseFloat(r)/100);else{if(!r.match(n))return[];i.push(parseFloat(r))}}return i}onDragStart(t,e){t.preventDefault();const i=t=>{this.throttledResize(t.clientX,t.clientY,e,t)},s=()=>{window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s)};window.addEventListener("mousemove",i),window.addEventListener("mouseup",s)}resize(t,e,i,s){let n=i>0?this.slotEnd[i-1]:0,r=n+this.minSizesArr[i];r=Math.max(r,this.slotEnd[i+1]-this.maxSizesArr[i+1]);let h,a=i<this.n-1?this.slotEnd[i+1]:1;a-=this.minSizesArr[i+1],a=Math.min(a,n+this.maxSizesArr[i]);let l=this.el.getBoundingClientRect(),o=!1;(h="vertical"===this.d?(e-l.top)/l.height:(t-l.left)/l.width)<r?this.slotEnd[i]>r&&(h=r,o=!0):h>a?this.slotEnd[i]<a&&(h=a,o=!0):o=!0,o&&(this.slotEnd=[...this.slotEnd.slice(0,i),h,...this.slotEnd.slice(i+1)],this.slotResized.emit({divider:i,sizes:this.slotEndToSizes(this.slotEnd),originalEvent:s}))}slotEndToSizes(t){const e=[];for(let i=0;i<t.length;++i)e.push(this.getSlotSize(i,t));return e}getSlotSize(t,e){return 0===t?e[t]:e[t]-e[t-1]}render(){if(!this.slotEnd||0===this.slotEnd.length)return null;let e=[],i=[],s=[];for(let i=0;i<this.n;++i){let s,n=`container${i}`,r=`${i}`,h=this.getSlotSize(i,this.slotEnd);e.push(t("div",{id:n,style:s="vertical"===this.d?{width:"100%",height:`${100*h}%`}:{width:`${100*h}%`,height:"100%"}},t("slot",{name:r})))}for(let e=0;e<this.n-1;++e){let n,r,h;"vertical"===this.d?(n={top:`${100*this.slotEnd[e]}%`},r="divider-v display-divider-v",h="divider-v phantom-divider-v"):(n={left:`${100*this.slotEnd[e]}%`},r="divider-h display-divider-h",h="divider-h phantom-divider-h"),i.push(t("div",{class:r,style:n})),this.fixed||s.push(t("div",{class:h,draggable:!0,onDragStart:t=>{this.onDragStart(t,e)},onTouchMove:t=>{this.onTouchMove(t,e)},style:n}))}return t("div",{class:"top-container"},t("div",{class:"dividers-container"},i,s),t("div",{class:"vertical"===this.d?"slots-container-v":"slots-container-h"},e))}static get is(){return"split-me"}static get encapsulation(){return"shadow"}static get properties(){return{d:{type:String,attr:"d"},el:{elementRef:!0},fixed:{type:Boolean,attr:"fixed"},maxSizes:{type:String,attr:"max-sizes",watchCallbacks:["watchMaxSizes"]},minSizes:{type:String,attr:"min-sizes",watchCallbacks:["watchMinSizes"]},n:{type:Number,attr:"n",watchCallbacks:["watchN"]},sizes:{type:String,attr:"sizes",watchCallbacks:["watchSizes"]},slotEnd:{state:!0},throttle:{type:Number,attr:"throttle",watchCallbacks:["watchThrottle"]}}}static get events(){return[{name:"slotResized",method:"slotResized",bubbles:!0,cancelable:!0,composed:!0}]}static get style(){return".sc-split-me-h{--divider-length:100%;--divider-thickness:0.15rem;--divider-color:#eee;--divider-shadow:0 0 0.3rem #000;--divider-image-h:none;--divider-image-v:none;--divider-background-repeat:no-repeat;--divider-background-position:center}.divider-h.sc-split-me{height:100%;position:absolute;top:0;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.divider-v.sc-split-me{width:100%;position:absolute;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.display-divider-h.sc-split-me{width:var(--divider-thickness);height:var(--divider-length);background-image:var(--divider-image-h);top:50%}.display-divider-h.sc-split-me, .display-divider-v.sc-split-me{-webkit-box-shadow:var(--divider-shadow);box-shadow:var(--divider-shadow);background-color:var(--divider-color);background-repeat:var(--divider-background-repeat);background-position:var(--divider-background-position);-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:1}.display-divider-v.sc-split-me{height:var(--divider-thickness);width:var(--divider-length);background-image:var(--divider-image-v);left:50%}.phantom-divider-h.sc-split-me{cursor:col-resize;width:2rem}.phantom-divider-h.sc-split-me, .phantom-divider-v.sc-split-me{background-color:transparent;z-index:2}.phantom-divider-v.sc-split-me{cursor:row-resize;height:2rem}.top-container.sc-split-me{position:relative;width:100%;height:100%;overflow:hidden}.slots-container-h.sc-split-me, .slots-container-v.sc-split-me{position:relative;display:-ms-flexbox;display:flex;height:100%}.slots-container-v.sc-split-me{-ms-flex-direction:column;flex-direction:column}.dividers-container.sc-split-me{position:absolute;left:0;top:0;height:100%;width:100%}"}}export{w as SplitMe};