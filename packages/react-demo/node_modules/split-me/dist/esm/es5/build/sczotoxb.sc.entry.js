/*! Built with http://stenciljs.com */
import{h}from"../split-me.core.js";var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},FUNC_ERROR_TEXT="Expected a function",NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(t,e,i){var n,s,r,o,a,h,l=0,d=!1,c=!1,u=!0;if("function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);function f(e){var i=n,r=s;return n=s=void 0,l=e,o=t.apply(r,i)}function p(t){var i=t-h;return void 0===h||i>=e||i<0||c&&t-l>=r}function v(){var t=now();if(p(t))return m(t);a=setTimeout(v,function(t){var i=e-(t-h);return c?nativeMin(i,r-(t-l)):i}(t))}function m(t){return a=void 0,u&&n?f(t):(n=s=void 0,o)}function g(){var t=now(),i=p(t);if(n=arguments,s=this,h=t,i){if(void 0===a)return function(t){return l=t,a=setTimeout(v,e),d?f(t):o}(h);if(c)return a=setTimeout(v,e),f(h)}return void 0===a&&(a=setTimeout(v,e)),o}return e=toNumber(e)||0,isObject(i)&&(d=!!i.leading,r=(c="maxWait"in i)?nativeMax(toNumber(i.maxWait)||0,e):r,u="trailing"in i?!!i.trailing:u),g.cancel=function(){void 0!==a&&clearTimeout(a),l=0,n=h=s=a=void 0},g.flush=function(){return void 0===a?o:m(now())},g}function throttle(t,e,i){var n=!0,s=!0;if("function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);return isObject(i)&&(n="leading"in i?!!i.leading:n,s="trailing"in i?!!i.trailing:s),debounce(t,e,{leading:n,maxWait:e,trailing:s})}function isObject(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function isObjectLike(t){return!!t&&"object"==typeof t}function isSymbol(t){return"symbol"==typeof t||isObjectLike(t)&&objectToString.call(t)==symbolTag}function toNumber(t){if("number"==typeof t)return t;if(isSymbol(t))return NAN;if(isObject(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=isObject(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(reTrim,"");var i=reIsBinary.test(t);return i||reIsOctal.test(t)?freeParseInt(t.slice(2),i?2:8):reIsBadHex.test(t)?NAN:+t}var lodash_throttle=throttle,SplitMe=function(){function t(){var t=this;this.n=1,this.d="horizontal",this.fixed=!1,this.sizes="",this.minSizes="",this.maxSizes="",this.throttle=0,this.nChanged=!1,this.sizesChanged=!1,this.minSizesChanged=!1,this.maxSizesChanged=!1,this.onTouchMove=function(e,i){e.preventDefault(),e.touches.length>0&&t.throttledResize(e.touches[0].clientX,e.touches[0].clientY,i,e)}}return t.prototype.watchN=function(){this.nChanged=!0},t.prototype.watchSizes=function(){this.sizesChanged=!0},t.prototype.watchMinSizes=function(){this.minSizesChanged=!0},t.prototype.watchMaxSizes=function(){this.maxSizesChanged=!0},t.prototype.watchThrottle=function(t){this.throttledResize=lodash_throttle(this.resize.bind(this),t)},t.prototype.componentWillLoad=function(){this.throttledResize=lodash_throttle(this.resize.bind(this),this.throttle);var t=this.parseSizes(this.sizes);this.slotEnd=t.length===this.n?this.assignedSlotEnd(t):this.defaultSlotEnd(this.n);var e=this.parseSizes(this.minSizes);this.minSizesArr=e.length===this.n?e:this.defaultMinSizes(this.n);var i=this.parseSizes(this.maxSizes);this.maxSizesArr=i.length===this.n?i:this.defaultMaxSizes(this.n)},t.prototype.componentWillUpdate=function(){var t;if(this.sizesChanged&&(t=this.parseSizes(this.sizes)).length!==this.n&&(this.sizesChanged=!1),this.sizesChanged?(this.slotEnd=this.assignedSlotEnd(t),this.nChanged=!1,this.sizesChanged=!1):this.nChanged&&(this.slotEnd=this.rescaleSlotEnd(this.n,this.slotEnd),this.nChanged=!1),this.minSizesChanged){var e=this.parseSizes(this.minSizes);this.minSizesArr=e.length===this.n?e:this.defaultMinSizes(this.n),this.minSizesChanged=!1}if(this.maxSizesChanged){var i=this.parseSizes(this.minSizes);this.maxSizesArr=i.length===this.n?i:this.defaultMaxSizes(this.n),this.maxSizesChanged=!1}},t.prototype.defaultSlotEnd=function(t){for(var e=[],i=0;i<t;++i)e.push((i+1)/t);return e},t.prototype.assignedSlotEnd=function(t){for(var e=[],i=0,n=0;n<t.length;++n)e.push(Math.min(1,i+=t[n]));return e},t.prototype.rescaleSlotEnd=function(t,e){for(var i=e.length/t,n=[],s=0;s<t-1;++s)n.push(s<e.length?e[s]*i:(s+1)/t);return n.push(1),n},t.prototype.defaultMinSizes=function(t){for(var e=[],i=0;i<t;++i)e.push(0);return e},t.prototype.defaultMaxSizes=function(t){for(var e=[],i=0;i<t;++i)e.push(1);return e},t.prototype.parseSizes=function(t){if(!t)return[];if(Array.isArray(t))return t.length===this.n?t:[];try{var e=JSON.parse(t);if(Array.isArray(e))return e.length===this.n?e:[]}catch(t){}var i=t.split(",");if(i.length!==this.n)return[];for(var n=[],s=/^\s*\d+(\.\d*)?\%\s*$/,r=/^\s*(0|1)(\.\d*)?\s*$/,o=0;o<i.length;++o){var a=i[o];if(a.match(s))n.push(parseFloat(a)/100);else{if(!a.match(r))return[];n.push(parseFloat(a))}}return n},t.prototype.onDragStart=function(t,e){var i=this;t.preventDefault();var n=function(t){i.throttledResize(t.clientX,t.clientY,e,t)},s=function(){window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",s)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",s)},t.prototype.resize=function(t,e,i,n){var s=i>0?this.slotEnd[i-1]:0,r=s+this.minSizesArr[i];r=Math.max(r,this.slotEnd[i+1]-this.maxSizesArr[i+1]);var o,a=i<this.n-1?this.slotEnd[i+1]:1;a-=this.minSizesArr[i+1],a=Math.min(a,s+this.maxSizesArr[i]);var h=this.el.getBoundingClientRect(),l=!1;(o="vertical"===this.d?(e-h.top)/h.height:(t-h.left)/h.width)<r?this.slotEnd[i]>r&&(o=r,l=!0):o>a?this.slotEnd[i]<a&&(o=a,l=!0):l=!0,l&&(this.slotEnd=this.slotEnd.slice(0,i).concat([o],this.slotEnd.slice(i+1)),this.slotResized.emit({divider:i,sizes:this.slotEndToSizes(this.slotEnd),originalEvent:n}))},t.prototype.slotEndToSizes=function(t){for(var e=[],i=0;i<t.length;++i)e.push(this.getSlotSize(i,t));return e},t.prototype.getSlotSize=function(t,e){return 0===t?e[t]:e[t]-e[t-1]},t.prototype.render=function(){var t=this;if(!this.slotEnd||0===this.slotEnd.length)return null;for(var e=[],i=[],n=[],s=0;s<this.n;++s){var r="container"+s,o=""+s,a=this.getSlotSize(s,this.slotEnd);e.push(h("div",{id:r,style:"vertical"===this.d?{width:"100%",height:100*a+"%"}:{width:100*a+"%",height:"100%"}},h("slot",{name:o})))}var l=function(e){var s=void 0,r=void 0,o=void 0;"vertical"===d.d?(s={top:100*d.slotEnd[e]+"%"},r="divider-v display-divider-v",o="divider-v phantom-divider-v"):(s={left:100*d.slotEnd[e]+"%"},r="divider-h display-divider-h",o="divider-h phantom-divider-h"),i.push(h("div",{class:r,style:s})),d.fixed||n.push(h("div",{class:o,draggable:!0,onDragStart:function(i){t.onDragStart(i,e)},onTouchMove:function(i){t.onTouchMove(i,e)},style:s}))},d=this;for(s=0;s<this.n-1;++s)l(s);return h("div",{class:"top-container"},h("div",{class:"dividers-container"},i,n),h("div",{class:"vertical"===this.d?"slots-container-v":"slots-container-h"},e))},Object.defineProperty(t,"is",{get:function(){return"split-me"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{d:{type:String,attr:"d"},el:{elementRef:!0},fixed:{type:Boolean,attr:"fixed"},maxSizes:{type:String,attr:"max-sizes",watchCallbacks:["watchMaxSizes"]},minSizes:{type:String,attr:"min-sizes",watchCallbacks:["watchMinSizes"]},n:{type:Number,attr:"n",watchCallbacks:["watchN"]},sizes:{type:String,attr:"sizes",watchCallbacks:["watchSizes"]},slotEnd:{state:!0},throttle:{type:Number,attr:"throttle",watchCallbacks:["watchThrottle"]}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"events",{get:function(){return[{name:"slotResized",method:"slotResized",bubbles:!0,cancelable:!0,composed:!0}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return".sc-split-me-h{--divider-length:100%;--divider-thickness:0.15rem;--divider-color:#eee;--divider-shadow:0 0 0.3rem #000;--divider-image-h:none;--divider-image-v:none;--divider-background-repeat:no-repeat;--divider-background-position:center}.divider-h.sc-split-me{height:100%;position:absolute;top:0;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.divider-v.sc-split-me{width:100%;position:absolute;left:0;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.display-divider-h.sc-split-me{width:var(--divider-thickness);height:var(--divider-length);background-image:var(--divider-image-h);top:50%}.display-divider-h.sc-split-me, .display-divider-v.sc-split-me{-webkit-box-shadow:var(--divider-shadow);box-shadow:var(--divider-shadow);background-color:var(--divider-color);background-repeat:var(--divider-background-repeat);background-position:var(--divider-background-position);-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:1}.display-divider-v.sc-split-me{height:var(--divider-thickness);width:var(--divider-length);background-image:var(--divider-image-v);left:50%}.phantom-divider-h.sc-split-me{cursor:col-resize;width:2rem}.phantom-divider-h.sc-split-me, .phantom-divider-v.sc-split-me{background-color:transparent;z-index:2}.phantom-divider-v.sc-split-me{cursor:row-resize;height:2rem}.top-container.sc-split-me{position:relative;width:100%;height:100%;overflow:hidden}.slots-container-h.sc-split-me, .slots-container-v.sc-split-me{position:relative;display:-ms-flexbox;display:flex;height:100%}.slots-container-v.sc-split-me{-ms-flex-direction:column;flex-direction:column}.dividers-container.sc-split-me{position:absolute;left:0;top:0;height:100%;width:100%}"},enumerable:!0,configurable:!0}),t}();export{SplitMe};